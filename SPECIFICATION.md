# ××¤×™×•×Ÿ ××œ× - ××¢×¨×›×ª × ×™×”×•×œ ×•×ª×¦×•×’×ª ××ª×¨×™ HTML

## ×ª×™××•×¨ ×›×œ×œ×™
××¢×¨×›×ª ×•×•×‘ ×”×××¤×©×¨×ª ×œ×©××•×¨, ×œ× ×”×œ ×•×œ×”×¦×™×’ ××ª×¨×™ HTML ×“×™× ××™×™×. ×”××¢×¨×›×ª ××•×¨×›×‘×ª ××“×£ ×‘×™×ª, ×¤×× ×œ × ×™×”×•×œ ××•×’×Ÿ ×‘×¡×™×¡××”, ×•×× ×’× ×•×Ÿ ×”×¦×’×ª ×ª×•×›×Ÿ HTML ××ª×§×“×.

## ××¨×›×™×˜×§×˜×•×¨×” ×˜×›× ×™×ª

### ×˜×›× ×•×œ×•×’×™×•×ª × ×“×¨×©×•×ª
- **Frontend**: HTML5, CSS3, JavaScript (ES6+)
- **Database**: Firebase Realtime Database
- **Hosting**: ×›×œ ×¤×œ×˜×¤×•×¨××ª hosting ×¡×˜×˜×™×ª (Netlify, Vercel, GitHub Pages)
- **Authentication**: ×¡×™×¡××” ×§×‘×•×¢×” (×œ× ××¢×¨×›×ª ××©×ª××©×™× ××œ××”)

### ×”××œ×¦×•×ª ×˜×›× ×•×œ×•×’×™×•×ª
#### ××•××œ×¥: Vanilla JavaScript
**×¡×™×‘×•×ª ×œ×‘×—×™×¨×”:**
- ×¤×©×˜×•×ª ×”×¤×¨×•×™×§×˜ (3 ×§×‘×¦×™× ×¢×™×§×¨×™×™×)
- ××™×Ÿ ×¦×•×¨×š ×‘×”×œ×™×š ×§×•××¤×™×œ×¦×™×”
- ×¤×™×ª×•×— ×•×˜×¡×˜×™× ××™×™×“×™×™×
- ×¤×¨×™×¡×” ×¤×©×•×˜×” ×œ×œ× dependencies
- ×’××™×©×•×ª ××§×¡×™××œ×™×ª ×œ×˜×™×¤×•×œ ×‘-HTML ×“×™× ××™
- ×‘×™×¦×•×¢×™× ××¢×•×œ×™× ×•×ª×—×–×•×§×” ×§×œ×”

#### ×œ× ××•××œ×¥: TypeScript
**×¡×™×‘×•×ª ×œ××™-×”×ª×××”:**
- Overhead ××™×•×ª×¨ ×œ×¤×¨×•×™×§×˜ ×‘×’×•×“×œ ×–×”
- ×¦×•×¨×š ×‘×”×’×“×¨×ª build process ××•×¨×›×‘
- ×§×•×©×™ ×‘×”×’×“×¨×ª types ×œ××‘× ×™ × ×ª×•× ×™× ×“×™× ××™×™×
- ××•×‘×“×Ÿ ×’××™×©×•×ª ×”× ×“×¨×©×ª ×œ×˜×™×¤×•×œ ×‘-HTML ××©×ª××©

#### ××œ×˜×¨× ×˜×™×‘×” ××¤×©×¨×™×ª: Vue.js CDN
**×™×ª×¨×•× ×•×ª:**
- ×¤×©×˜×•×ª ×›××• vanilla JS
- × ×™×”×•×œ state ×˜×•×‘ ×™×•×ª×¨
- reactivity ××•×‘× ×™×ª
- ×ª×‘× ×™×•×ª × ×§×™×•×ª

**×—×¡×¨×•× ×•×ª:**
- ×¡×¤×¨×™×™×” ×—×™×¦×•× ×™×ª × ×•×¡×¤×ª
- learning curve ×§×œ

### ×¡×¤×¨×™×•×ª × ×•×¡×¤×•×ª ××•××œ×¦×•×ª (××•×¤×¦×™×•× ×œ×™)
```javascript
// ×œ×©×™×¤×•×¨ ×—×•×•×™×™×ª ×”××©×ª××©:
- SweetAlert2        // ×”×•×“×¢×•×ª ××œ×’× ×˜×™×•×ª
- CodeMirror         // ×¢×•×¨×š ×§×•×“ HTML ××ª×§×“×
- Loading spinners   // ××™× ×“×™×§×˜×•×¨×™ ×˜×¢×™× ×”
```

### ××‘× ×” ×”×¤×¨×•×™×§×˜
```
/
â”œâ”€â”€ index.html          # ×“×£ ×¨××©×™
â”œâ”€â”€ script.js          # ×§×•×“ JavaScript ×¨××©×™
â”œâ”€â”€ style.css          # ×¢×™×¦×•×‘ CSS
â”œâ”€â”€ netlify.toml       # ×”×’×“×¨×•×ª deployment
â””â”€â”€ _redirects         # ×”×’×“×¨×•×ª routing
```

## ×¤×•× ×§×¦×™×•× ×œ×™×•×ª ××¤×•×¨×˜×ª

### 1. ×“×£ ×”×‘×™×ª
#### ×ª×›×•× ×•×ª:
- **URL**: `/` (root path)
- **×ª×¦×•×’×”**: ×“×£ × ×—×™×ª×” ××˜×¨×§×˜×™×‘×™ ×¢× ××™×“×¢ ×¢×œ ×”××¢×¨×›×ª
- **×›×¤×ª×•×¨×™×**:
  - ×›×¤×ª×•×¨ "×”×ª×—×œ ×¢×›×©×™×•" - ×¤×•×ª×— ×¤×× ×œ × ×™×”×•×œ ××• ××•×“×œ ××™××•×ª
  - ×›×¤×ª×•×¨ "+" ×§×‘×•×¢ ×‘×¤×™× ×” (admin button) - ×’×™×©×” ×œ×¤×× ×œ × ×™×”×•×œ

#### ×”×ª× ×”×’×•×ª:
- ×× ×™×© ×¡×™×¡××” ×©××•×¨×” ×‘-localStorage â†’ ×›× ×™×¡×” ×™×©×™×¨×” ×œ×¤×× ×œ
- ×× ××™×Ÿ ×¡×™×¡××” ×©××•×¨×” â†’ ×¤×ª×™×—×ª ××•×“×œ ××™××•×ª

### 2. ××¢×¨×›×ª ××™××•×ª
#### ×ª×›×•× ×•×ª:
- **××•×“×œ popup** ×¢× ×©×“×” ×¡×™×¡××”
- **×¡×™×¡××” ×§×‘×•×¢×”**: "2616" (hardcoded)
- **×ª××™×›×” ×‘×œ×—×™×¦×ª Enter** ×œ×”×›× ×¡×ª ×¡×™×¡××”
- **×–×™×›×¨×•×Ÿ ××§×•××™**: ×©××™×¨×ª ×”×¡×™×¡××” ×‘-localStorage ×‘×§×™×“×•×“ Base64

#### ×”×ª× ×”×’×•×ª:
- ×©×“×” ×¡×™×¡××” ×¢× focus ××•×˜×•××˜×™
- ×”×•×“×¢×ª ×©×’×™××” ×¢×œ ×¡×™×¡××” ×©×’×•×™×” + ××¤×§×˜ ×¨×¢×“
- × ×™×§×•×™ ×©×“×” ×•×—×–×¨×ª focus ×¢×œ ×©×’×™××”
- ×©××™×¨×” ××•×˜×•××˜×™×ª ×©×œ ×¡×™×¡××” × ×›×•× ×”
- ×‘×“×™×§×” ××•×˜×•××˜×™×ª ×©×œ ×¡×™×¡××” ×©××•×¨×” ×‘×˜×¢×™× ×ª ×”×“×£

#### API ×–×™×›×¨×•×Ÿ ××§×•××™:
```javascript
// ×©××™×¨×ª ×¡×™×¡××”
localStorage.setItem('admin_access_code', btoa(password))

// ×§×¨×™××ª ×¡×™×¡××”
atob(localStorage.getItem('admin_access_code'))

// ××—×™×§×ª ×¡×™×¡××”
localStorage.removeItem('admin_access_code')
```

### 3. ×¤×× ×œ × ×™×”×•×œ
#### ×ª×¦×•×’×•×ª:
1. **×ª×¦×•×’×ª ×¨×©×™××”** (×‘×¨×™×¨×ª ××—×“×œ)
2. **×ª×¦×•×’×ª ×¢×¨×™×›×”/×”×•×¡×¤×”**

#### ×ª×¦×•×’×ª ×¨×©×™××”:
- **×›×•×ª×¨×ª**: "××ª×¨×™× ×©××•×¨×™×"
- **×˜×‘×œ×”** ×¢× ×¢××•×“×•×ª:
  - ×©× ×”××ª×¨
  - × ×ª×™×‘ URL (×§×™×©×•×¨ ×œ×ª×¦×•×’×”)
  - ×¤×¢×•×œ×•×ª (×”×¦×’, ×¢×¨×•×š, ××—×§)
- **×›×¤×ª×•×¨**: "×”×•×¡×£ ××ª×¨ ×—×“×©"
- **×›×¤×ª×•×¨**: "×”×ª× ×ª×§" (×× ×§×” localStorage)
- **×›×¤×ª×•×¨**: "X" ×œ×¡×’×™×¨×ª ×”×¤×× ×œ

#### ×ª×¦×•×’×ª ×¢×¨×™×›×”/×”×•×¡×¤×”:
- **×©×“×•×ª**:
  - ×©× ×”××ª×¨ (×˜×§×¡×˜ - ×—×•×‘×”)
  - × ×ª×™×‘ URL (×˜×§×¡×˜ - ××•×¤×¦×™×•× ×œ×™, ×™×•×¦×¨ ××•×˜×•××˜×™×ª ××”×©×)
  - ×§×•×“ HTML (textarea ×’×“×•×œ - ×—×•×‘×”)
- **×›×¤×ª×•×¨×™×**:
  - ×©××•×¨
  - ×”×¤×¢×œ ×ª×¦×•×’×” ××§×“×™××”
  - ×—×–×•×¨ ×œ×¨×©×™××”

### 4. ×× ×’× ×•×Ÿ ×©××™×¨×” ×•××—×–×•×¨ × ×ª×•× ×™×

#### ××‘× ×” Database (Firebase):
```json
{
  "htmlSites": {
    "site-key": {
      "name": "×©× ×”××ª×¨",
      "html": "×§×•×“ HTML ××œ×"
    }
  }
}
```

#### ×™×¦×™×¨×ª × ×ª×™×‘ URL:
- ×× ×”××©×ª××© ×”×–×™×Ÿ × ×ª×™×‘ â†’ ×”×©×ª××© ×‘×•
- ×× ×œ× â†’ ×™×¦×™×¨×” ××•×˜×•××˜×™×ª ××”×©×:
  - ×”××¨×” ×œ××•×ª×™×•×ª ×§×˜× ×•×ª
  - ×”×—×œ×¤×ª ×¨×•×•×—×™× ×‘××§×¤×™×
  - ×”×¡×¨×ª ×ª×•×•×™× ××™×•×—×“×™×
  - ×©××™×¨×” ×¢×œ ×¢×‘×¨×™×ª ×•×× ×’×œ×™×ª

#### ×¤×¢×•×œ×•×ª CRUD:
- **Create**: ×©××™×¨×ª ××ª×¨ ×—×“×©
- **Read**: ×§×¨×™××ª ×¨×©×™××ª ××ª×¨×™× + ×ª×•×›×Ÿ ×¡×¤×¦×™×¤×™
- **Update**: ×¢×“×›×•×Ÿ ××ª×¨ ×§×™×™×
- **Delete**: ××—×™×§×ª ××ª×¨ (×¢× ××™×©×•×¨)

### 5. ×× ×’× ×•×Ÿ ×”×¦×’×ª ×ª×•×›×Ÿ HTML

#### Routing ××ª×§×“×:
- **Root (/)**: ×“×£ ×”×‘×™×ª
- **/{site-key}**: ×”×¦×’×ª ××ª×¨ ×¡×¤×¦×™×¤×™
- **History API**: ×ª××™×›×” ×‘×—×¦×™ ×—×–×•×¨/×§×“×™××”
- **404 handling**: ×“×£ ×©×’×™××” ××¢×•×¦×‘

#### ×¢×™×‘×•×“ HTML ××ª×§×“×:
```javascript
// ×¢×™×‘×•×“ ×©×œ×‘×™×:
1. × ×™×§×•×™ ××©××‘×™× ×§×•×“××™×
2. ×¤×™×¨×•×§ HTML ×‘×××¦×¢×•×ª DOMParser
3. ×”×¤×¨×“×ª ×•×¢×™×‘×•×“ ×©×œ:
   - ×¡×’× ×•× ×•×ª (<style> tags)
   - ×§×™×©×•×¨×™× ×—×™×¦×•× ×™×™× (<link> tags)
   - ×¡×§×¨×™×¤×˜×™× ×—×™×¦×•× ×™×™× (<script src>)
   - ×¡×§×¨×™×¤×˜×™× ×¤× ×™××™×™× (<script> inline)
4. ×˜×¢×™× ×” ×¡×“×¨×ª×™×ª ×¢× Promise.all()
5. ×”×¨×¦×ª ×¡×§×¨×™×¤×˜×™× ×œ××—×¨ ×˜×¢×™× ×ª DOM
```

#### ×˜×™×¤×•×œ ×‘×¡×§×¨×™×¤×˜×™× ××™×•×—×“×™×:
- **p5.js detection**: ×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ ×¡×§×¨×™×¤×˜×™ p5.js
- **Instance tracking**: ××¢×§×‘ ××—×¨×™ ××•×¤×¢×™× ×¤×¢×™×œ×™×
- **Cleanup mechanism**: × ×™×§×•×™ ××•×˜×•××˜×™ ×‘×¢×ª ××¢×‘×¨ ×‘×™×Ÿ ×“×¤×™×

#### Content Security Policy:
```html
<meta http-equiv="Content-Security-Policy" 
      content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:;">
```

### 6. × ×™×”×•×œ ××¦×‘ ××¤×œ×™×§×¦×™×”

#### ××©×ª× ×™× ×’×œ×•×‘×œ×™×™×:
```javascript
let currentEditingKey = null;  // ××¤×ª×— ×”××ª×¨ ×”× ×¢×¨×š ×›×¨×’×¢
let cleanupFunction = null;    // ×¤×•× ×§×¦×™×™×ª × ×™×§×•×™ ×œ×¢××•×“ × ×•×›×—×™
```

#### ××¦×‘×™ ×ª×¦×•×’×”:
- **Homepage**: ×“×£ ×”×‘×™×ª
- **Site View**: ×ª×¦×•×’×ª ××ª×¨ ×¡×¤×¦×™×¤×™
- **Admin Panel**: ×¤×× ×œ × ×™×”×•×œ
- **Access Modal**: ××•×“×œ ××™××•×ª

#### Event Listeners:
```javascript
// × ×“×¨×©×™×:
- window.addEventListener('popstate', loadPageFromPath)
- accessCodeInput.addEventListener('keypress', handleEnter)
- accessCodeInput.addEventListener('input', clearErrorMessage)
- submitCodeButton.addEventListener('click', authenticate)
- adminButton.addEventListener('click', openAdminPanel)
- logoutButton.addEventListener('click', logout)
- ×›×œ ×›×¤×ª×•×¨×™ ×”×¤×× ×œ...
```

### 7. ×ª×›×•× ×•×ª × ×•×¡×¤×•×ª

#### ××‘×˜×—×”:
- ×”×¦×¤× ×ª ×¡×™×¡××” ×‘-localStorage (Base64)
- ×•×™×“×•× ×¡×™×¡××” ×‘×›×œ ×¤×ª×™×—×ª ×¤×× ×œ
- × ×™×§×•×™ ××•×˜×•××˜×™ ×©×œ ×¡×™×¡××” ×œ× ×ª×§×™× ×”

#### ×‘×™×¦×•×¢×™×:
- × ×™×§×•×™ ××•×˜×•××˜×™ ×©×œ ××©××‘×™×
- ×˜×¢×™× ×” ××¡×™× ×›×¨×•× ×™×ª ×©×œ ×¡×§×¨×™×¤×˜×™×
- ××•×¤×˜×™××™×–×¦×™×” ×œ×–×™×›×¨×•×Ÿ

#### ×—×•×•×™×™×ª ××©×ª××©:
- ×”×•×“×¢×•×ª ××©×•×‘ ×‘×¨×•×¨×•×ª
- ××™×©×•×¨ ×¤×¢×•×œ×•×ª ××—×™×§×”
- Focus ××•×˜×•××˜×™ ×‘×©×“×•×ª
- ×˜×™×¤×•×œ ×‘×©×’×™××•×ª ×¨×©×ª

## API Requirements

### ×“×¨×™×©×•×ª ×˜×›× ×™×•×ª ××¤×•×¨×˜×•×ª
#### ES6+ Features × ×“×¨×©×™×:
- Arrow functions
- Destructuring assignment
- Template literals
- Promise.all() ×•×—×™×¤×•×© ××¡×™× ×›×¨×•× ×™
- ES6 Modules (import/export)

#### Modern Browser APIs:
- DOMParser API (×œ×¤×™×¨×•×§ HTML)
- LocalStorage API (×œ×–×™×›×¨×•×Ÿ ×¡×™×¡××”)
- History API (×œ× ×™×•×•×˜)
- Fetch API ××• XMLHttpRequest

#### ××‘× ×” ×§×•×“ ××•××œ×¥:
```javascript
// ××•×“×•×œ×¨×™×•×ª ×œ×œ× framework:
const App = {
    auth: {
        login(),
        logout(),
        checkSavedPassword()
    },
    sites: {
        list(),
        create(),
        update(),
        delete(),
        render()
    },
    ui: {
        showModal(),
        hideModal(),
        showError(),
        showSuccess()
    },
    utils: {
        generateSlug(),
        sanitizeHTML(),
        validateInput()
    }
};
```

#### Error Handling × ×“×¨×©:
```javascript
// ×˜×™×¤×•×œ ×‘×©×’×™××•×ª ×§×¨×™×˜×™ ×‘××§×•××•×ª ×”×‘××™×:
- Firebase connection errors
- LocalStorage access errors
- HTML parsing errors
- Script execution errors
- Network timeouts
```

### Firebase Configuration:
```javascript
const firebaseConfig = {
    apiKey: "...",
    authDomain: "...",
    databaseURL: "...",
    projectId: "...",
    storageBucket: "...",
    messagingSenderId: "...",
    appId: "..."
};
```

### Firebase Functions × ×“×¨×©×•×ª:
```javascript
import { 
    initializeApp,
    getDatabase,
    ref,
    set,
    get,
    onValue,
    remove,
    child 
} from "firebase/[version]/firebase-[modules].js";
```

## Deployment Requirements

### ×”××œ×¦×”: Netlify (××•×¢×“×£)
#### ×œ××” × ×˜×œ×™×¤×™×™ ××•×¢×“×£:
- **Continuous Deployment**: ×—×™×‘×•×¨ ××•×˜×•××˜×™ ×œ×’×™×˜×”××‘
- **Environment Variables**: ×ª××™×›×” ×‘××©×ª× ×™ ×¡×‘×™×‘×” ×œ×¤×™×™×¨×‘×™×™×¡
- **SPA Routing**: ×ª××™×›×” ××•×‘× ×™×ª ×‘-History API
- **HTTPS**: ××‘×˜×—×” ××•×‘× ×™×ª
- **CDN**: ×‘×™×¦×•×¢×™× ××”×™×¨×™× ×‘×¨×—×‘×™ ×”×¢×•×œ×

### Netlify Configuration:
```toml
# netlify.toml
[build]
  publish = "."

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200

[build.environment]
  NODE_VERSION = "18"
```

#### Environment Variables ×‘-Netlify:
```bash
# ×”×’×“×¨×•×ª × ×“×¨×©×•×ª ×‘-Netlify dashboard:
FIREBASE_API_KEY=your_api_key_here
FIREBASE_AUTH_DOMAIN=your_project.firebaseapp.com
FIREBASE_DATABASE_URL=https://your_project.firebaseio.com
FIREBASE_PROJECT_ID=your_project_id
FIREBASE_STORAGE_BUCKET=your_project.appspot.com
FIREBASE_MESSAGING_SENDER_ID=123456789
FIREBASE_APP_ID=1:123456789:web:abcdef123456
```

#### Build Commands ×‘-Netlify:
```bash
# Build command (××•×¤×¦×™×•× ×œ×™):
# ×× ××©×ª××©×™× ×‘-environment variables replacement
sed -i 's/__FIREBASE_API_KEY__/'$FIREBASE_API_KEY'/g' script.js
sed -i 's/__FIREBASE_AUTH_DOMAIN__/'$FIREBASE_AUTH_DOMAIN'/g' script.js
# ×•×›×•' ×œ×©××¨ ×”××©×ª× ×™×...
```

### _redirects file:
```
/*    /index.html   200
```

### ××œ×˜×¨× ×˜×™×‘×•×ª Deployment:
#### Vercel:
```json
// vercel.json
{
  "rewrites": [
    { "source": "/(.*)", "destination": "/index.html" }
  ]
}
```

#### GitHub Pages:
- **××’×‘×œ×”**: ×œ× ×ª×•××š ×‘-environment variables
- **×¤×ª×¨×•×Ÿ**: hardcode Firebase config ××• ×©×™××•×© ×‘-GitHub Actions

## ×ª××™×›×” ×‘×¡×¤×¨×™×•×ª JavaScript ×—×™×¦×•× ×™×•×ª

### ×¡×¤×¨×™×•×ª × ×ª××›×•×ª ××•×‘× ×™×ª:
#### JavaScript Libraries:
- **p5.js** - ××× ×•×ª ×’× ×¨×˜×™×‘×™×ª ×•×× ×™××¦×™×•×ª
- **Three.js** - ×’×¨×¤×™×§×” ×ª×œ×ª ××™××“×™×ª
- **D3.js** - ×•×™×–×•××œ×™×–×¦×™×” ×©×œ × ×ª×•× ×™×
- **Chart.js** - ×’×¨×¤×™× ×•×˜×‘×œ××•×ª
- **Anime.js** - ×× ×™××¦×™×•×ª ××ª×§×“××•×ª
- **GSAP** - ×× ×™××¦×™×•×ª ×¤×¨×™××™×•×
- **Matter.js** - ×¤×™×–×™×§×” ×“×• ××™××“×™×ª
- **Fabric.js** - canvas interactivity
- **Phaser** - ×¤×™×ª×•×— ××©×—×§×™×

#### CSS Frameworks:
- **Bootstrap** - ×¢×™×¦×•×‘ ×¨×¡×¤×•× ×¡×™×‘×™
- **Tailwind CSS** - utility-first CSS
- **Bulma** - modern CSS framework
- **Foundation** - ×¢×™×¦×•×‘ ××ª×§×“×

### ×× ×’× ×•×Ÿ ×˜×¢×™× ×ª ×¡×¤×¨×™×•×ª:
#### ×˜×¢×™× ×” ×-CDN (××•××œ×¥):
```html
<!-- ×“×•×’×××•×ª ×œ×˜×¢×™× ×” ×-CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
```

#### ×–×™×”×•×™ ××•×˜×•××˜×™ ×©×œ ×¡×¤×¨×™×•×ª:
```javascript
// ×”××¢×¨×›×ª ×ª×–×”×” ××•×˜×•××˜×™×ª:
const libraryDetection = {
    'p5.js': () => window.p5 !== undefined,
    'Three.js': () => window.THREE !== undefined,
    'D3.js': () => window.d3 !== undefined,
    'Chart.js': () => window.Chart !== undefined,
    'Anime.js': () => window.anime !== undefined
};
```

### ×˜×™×¤×•×œ ××™×•×—×“ ×‘-p5.js:
#### ××ª×’×¨×™× ×•×¤×ª×¨×•× ×•×ª:
```javascript
// ×‘×¢×™×”: p5.js ×¨×™×¥ ×‘×¨×§×¢ ×’× ××—×¨×™ ××¢×‘×¨ ×œ×“×£ ××—×¨
// ×¤×ª×¨×•×Ÿ: ××¢×§×‘ ×•-cleanup ×©×œ instances

// ×–×™×”×•×™ p5.js scripts:
if (scriptContent.includes('setup()') || scriptContent.includes('draw()')) {
    // ×–×”×• ×¡×§×¨×™×¤×˜ p5.js
    // ×™×© ×œ×¢×˜×•×£ ×‘-cleanup wrapper
}

// × ×™×§×•×™ p5.js instances:
if (window.p5Instance) {
    window.p5Instance.remove();
    window.p5Instance = null;
}
```

#### ×ª××™×›×” ×‘-p5.js modes:
- **Global Mode**: setup() ×•-draw() ×’×œ×•×‘×œ×™×™×
- **Instance Mode**: new p5(sketch, element)
- **Both supported**: ×”××¢×¨×›×ª ×ª×ª××•×š ×‘×©× ×™ ×”××¦×‘×™×

## ×”×’×“×¨×•×ª × ×•×¡×¤×•×ª

### Environment Variables:
- ×¡×™×¡××ª ×× ×”×œ: "2616" (hardcoded)
- Firebase config: ×œ×”×—×œ×™×£ placeholders ×‘×–××Ÿ build

### Browser Support:
- ES6+ modules
- DOMParser API
- LocalStorage API
- History API
- Promise.all()

#### ×ª××™××•×ª × ×“×¨×©×ª:
- **Chrome**: 61+ (ES6 modules)
- **Firefox**: 60+ (ES6 modules)
- **Safari**: 10.1+ (ES6 modules)
- **Edge**: 16+ (ES6 modules)

#### Fallbacks × ×“×¨×©×™×:
```javascript
// ×‘×“×™×§×ª ×ª××™×›×” ×‘-LocalStorage
if (typeof(Storage) === "undefined") {
    console.warn("LocalStorage not supported");
    // fallback ×œ×× ×’× ×•×Ÿ cookies ××• session
}

// ×‘×“×™×§×ª ×ª××™×›×” ×‘-History API
if (!window.history.pushState) {
    console.warn("History API not supported");
    // fallback ×œ× ×™×•×•×˜ ×¨×’×™×œ ×¢× hash
}
```

### Performance Requirements:
#### ××“×“×™ ×‘×™×¦×•×¢×™× × ×“×¨×©×™×:
- **First Contentful Paint**: < 1.5s
- **Time to Interactive**: < 3s
- **Bundle size**: < 100KB (×›×•×œ×œ Firebase)
- **Memory usage**: × ×™×§×•×™ ××•×˜×•××˜×™ ×©×œ ××©××‘×™×

#### ××•×¤×˜×™××™×–×¦×™×•×ª × ×“×¨×©×•×ª:
```javascript
// Lazy loading ×œ×ª×•×›×Ÿ ×—×™×¦×•× ×™
- ×˜×¢×™× ×ª ×¡×§×¨×™×¤×˜×™× ×¨×§ ×›×©× ×“×¨×©
- × ×™×§×•×™ event listeners
- × ×™×§×•×™ intervals/timeouts
- × ×™×§×•×™ DOM elements ×“×™× ××™×™×
```

#### ×”×’×‘×œ×•×ª ×’×•×“×œ ×•×ª×•×›×Ÿ:
```javascript
// ×”×’×‘×œ×•×ª ××•××œ×¦×•×ª:
const LIMITS = {
    MAX_HTML_SIZE: 2 * 1024 * 1024,      // 2MB per site
    MAX_SITES_COUNT: 100,                // 100 sites max
    MAX_EXTERNAL_SCRIPTS: 10,            // 10 external scripts per site
    SCRIPT_TIMEOUT: 30000,               // 30s timeout for script loading
    MAX_SITE_NAME_LENGTH: 100,           // 100 chars max for site name
    MAX_SLUG_LENGTH: 50                  // 50 chars max for URL slug
};
```

#### ××•×¤×˜×™××™×–×¦×™×™×ª ×˜×¢×™× ×ª ×¡×¤×¨×™×•×ª:
```javascript
// ×¨×§ ×¡×¤×¨×™×•×ª ×©×‘×××ª × ×—×•×¦×•×ª ×™×˜×¢× ×•:
const loadLibraryOnDemand = (libraryName, url) => {
    if (!window[libraryName]) {
        return new Promise((resolve, reject) => {
            const script = document.createElement('script');
            script.src = url;
            script.onload = resolve;
            script.onerror = reject;
            document.head.appendChild(script);
        });
    }
    return Promise.resolve();
};
```

### Testing Scenarios:
1. ×›× ×™×¡×” ×œ×“×£ ×”×‘×™×ª ×œ×œ× ×¡×™×¡××” ×©××•×¨×”
2. ×›× ×™×¡×” ×¢× ×¡×™×¡××” ×©××•×¨×” ×ª×§×™× ×”
3. ×›× ×™×¡×” ×¢× ×¡×™×¡××” ×©××•×¨×” ×©×’×•×™×”
4. ×”×•×¡×¤×ª ××ª×¨ ×—×“×©
5. ×¢×¨×™×›×ª ××ª×¨ ×§×™×™×
6. ××—×™×§×ª ××ª×¨
7. ×ª×¦×•×’×ª ××ª×¨ ×¢× p5.js
8. × ×™×•×•×˜ ×‘×™×Ÿ ×“×¤×™× ×¢× history API
9. ×”×ª× ×ª×§×•×ª ×•× ×™×§×•×™ localStorage
10. ×˜×™×¤×•×œ ×‘-404

---

## ×”××œ×¦×•×ª ×¤×™×ª×•×— × ×•×¡×¤×•×ª

### Code Quality:
#### conventions × ×“×¨×©×™×:
```javascript
// ×©××•×ª ××©×ª× ×™× ×•×¤×•× ×§×¦×™×•×ª ×‘×× ×’×œ×™×ª
// ×”×¢×¨×•×ª ×‘×¢×‘×¨×™×ª ×œ××ª×›× ×ª ×™×©×¨××œ×™
// ×§×‘×•×¢×™× ×‘-UPPER_CASE
// camelCase ×œ×¤×•× ×§×¦×™×•×ª ×•××©×ª× ×™×
```

#### ××‘× ×” ×§×‘×¦×™× ××•××œ×¥:
```
script.js sections:
1. Firebase imports ×•×—×™×‘×•×¨
2. ×§×‘×•×¢×™× ×•××©×ª× ×™× ×’×œ×•×‘×œ×™×™×
3. ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ (utilities)
4. ×¤×•× ×§×¦×™×•×ª ××™××•×ª
5. ×¤×•× ×§×¦×™×•×ª UI
6. ×¤×•× ×§×¦×™×•×ª CRUD
7. Event listeners
8. ××ª×—×•×œ ××¤×œ×™×§×¦×™×”
```

### Security Considerations:
#### ×‘×˜×™×—×•×ª × ×“×¨×©×ª:
- Sanitization ×©×œ HTML input ××”××©×ª××©
- ×× ×™×¢×ª XSS attacks ×‘×ª×•×›×Ÿ ×“×™× ××™
- validation ×©×œ Firebase data
- ×”×’×‘×œ×ª ×’×•×“×œ HTML input (max size)

#### Content Security Policy ××ª×§×“×:
```html
<!-- ×œ×”×’× ×” ×‘×¡×™×¡×™×ª ××¤× ×™ XSS -->
<meta http-equiv="Content-Security-Policy" 
      content="default-src * 'unsafe-inline' 'unsafe-eval' data: blob:; 
               img-src * data: blob:; 
               media-src * data: blob:; 
               font-src * data:;">
```

#### HTML Sanitization:
```javascript
// ×¤×•× ×§×¦×™×•×ª sanitization × ×“×¨×©×•×ª:
const sanitizeHTML = (html) => {
    // ×”×¡×¨×ª script tags ××¡×•×›× ×™×
    const dangerous = /<script[^>]*>[\s\S]*?<\/script>/gi;
    const events = /on\w+\s*=/gi;
    
    return html
        .replace(dangerous, '') // ×”×¡×¨ inline scripts ××¡×•×›× ×™×
        .replace(events, '');   // ×”×¡×¨ event handlers inline
};

// ×•×•×œ×™×“×¦×™×” ×©×œ URLs ×—×™×¦×•× ×™×™×:
const validateExternalURL = (url) => {
    const allowedDomains = [
        'cdnjs.cloudflare.com',
        'cdn.jsdelivr.net',
        'unpkg.com',
        'code.jquery.com',
        'd3js.org'
    ];
    
    try {
        const urlObj = new URL(url);
        return allowedDomains.includes(urlObj.hostname);
    } catch {
        return false;
    }
};
```

#### ×”×’×“×¨×•×ª Firebase Rules ××ª×§×“××•×ª:
```json
{
  "rules": {
    "htmlSites": {
      ".read": true,
      ".write": true,
      "$siteId": {
        ".validate": "newData.hasChildren(['name', 'html']) && 
                     newData.child('name').val().length <= 100 && 
                     newData.child('html').val().length <= 2097152",
        "name": {
          ".validate": "newData.isString() && newData.val().length > 0"
        },
        "html": {
          ".validate": "newData.isString() && newData.val().length > 0"
        }
      }
    }
  }
}

#### ×”×’×“×¨×•×ª Firebase Rules:
```json
{
  "rules": {
    "htmlSites": {
      ".read": true,
      ".write": true,
      "$siteId": {
        ".validate": "newData.hasChildren(['name', 'html'])"
      }
    }
  }
}
```

### Monitoring ×•-Analytics:
#### ××“×“×™× ×œ×¢×§×•×‘ ××—×¨×™×”×:
```javascript
// Analytics × ×“×¨×©×™×:
- ××¡×¤×¨ ××ª×¨×™× × ×•×¦×¨×™× ×‘×™×•×
- ×–×× ×™ ×˜×¢×™× ×” ×©×œ ×“×¤×™×
- ×©×’×™××•×ª JavaScript
- × ×™×¦×•×œ×ª bandwidth
- ×©×™××•×© ×‘×¡×¤×¨×™×•×ª ×—×™×¦×•× ×™×•×ª

// ×“×•×’××” ×œ××™×¡×•×£ × ×ª×•× ×™×:
const analytics = {
    trackPageLoad: (pageKey, loadTime) => {
        console.log(`Page ${pageKey} loaded in ${loadTime}ms`);
    },
    trackError: (error, context) => {
        console.error(`Error in ${context}:`, error);
    },
    trackLibraryUsage: (libraryName, siteKey) => {
        console.log(`${libraryName} used in site ${siteKey}`);
    }
};
```

### Development Workflow:
#### ×¢×“×™×¤×•×™×•×ª ×¤×™×ª×•×—:
1. **Phase 1**: Firebase connection + basic CRUD
2. **Phase 2**: HTML rendering engine
3. **Phase 3**: Authentication system
4. **Phase 4**: UI/UX improvements
5. **Phase 5**: Performance optimizations

#### Testing Strategy:
```javascript
// Unit tests ×œ××¨×›×™×‘×™× ×§×¨×™×˜×™×™×:
- HTML sanitization
- URL slug generation
- LocalStorage operations
- Firebase CRUD operations
- Script cleanup mechanisms
```

## ×œ×¡×™×›×•×:
×–×”×• ××¤×™×•×Ÿ ××œ× ×•××§×™×£ ×©×œ ××¢×¨×›×ª × ×™×”×•×œ ×•×ª×¦×•×’×ª ××ª×¨×™ HTML ×”××©×œ×‘×ª:

### ğŸ—ï¸ **×ª×©×ª×™×ª ×˜×›× ×™×ª:**
- **Vanilla JavaScript** ×¢× Firebase Realtime Database
- **×¤×¨×™×¡×” ×‘× ×˜×œ×™×¤×™×™** ×¢× environment variables
- **×ª××™×›×” ××œ××” ×‘-SPA routing** ×•-History API

### ğŸ¨ **×ª××™×›×” ×‘×¡×¤×¨×™×•×ª:**
- **p5.js** ×¢× ×–×™×”×•×™ ××•×˜×•××˜×™ ×•× ×™×§×•×™ instances
- **×¡×¤×¨×™×•×ª ×¤×•×¤×•×œ×¨×™×•×ª** ×›××• Three.js, D3.js, Chart.js
- **×˜×¢×™× ×” ×—×›××”** ×¨×§ ×©×œ ×¡×¤×¨×™×•×ª × ×“×¨×©×•×ª

### ğŸ”’ **××‘×˜×—×” ××ª×§×“××ª:**
- **HTML sanitization** ×œ×× ×™×¢×ª XSS
- **Content Security Policy** ××•×ª××
- **Validation** ×©×œ ×ª×•×›×Ÿ ×•-URLs ×—×™×¦×•× ×™×™×
- **×”×’×‘×œ×•×ª ×’×•×“×œ** ×•×ª×•×›×Ÿ

### âš¡ **×‘×™×¦×•×¢×™×:**
- **×˜×¢×™× ×” ××”×™×¨×”** (< 1.5s FCP)
- **× ×™×§×•×™ ××•×˜×•××˜×™** ×©×œ ××©××‘×™×
- **××•×¤×˜×™××™×–×¦×™×™×ª ×–×™×›×¨×•×Ÿ** ×œ×× ×™×¢×ª ×“×œ×™×¤×•×ª

### ğŸ“Š **× ×™×˜×•×¨ ×•×ª×—×–×•×§×”:**
- **Analytics** ××•×‘× ×™× ×œ×¢×§×•×‘ ××—×¨×™ ×©×™××•×©
- **Error handling** ××§×™×£
- **Testing scenarios** ××¤×•×¨×˜×™×

×”××¤×œ×™×§×¦×™×” ××ª××™××” ×œ××ª×›× ×ª×™× ×”××¢×•× ×™×™× ×™× ×œ×™×¦×•×¨ **×¤×œ×˜×¤×•×¨××” ×’××™×©×” ×œ××™×¨×•×— ×ª×•×›×Ÿ HTML ×“×™× ××™** ×¢× ×ª××™×›×” ×‘×¡×¤×¨×™×•×ª JavaScript ××•×“×¨× ×™×•×ª ×•×‘×˜×™×—×•×ª ××¨×‘×™×ª.
